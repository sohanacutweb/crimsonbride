function fla_v2_masonry_modalWin(m,v){function r(a,e){this.appName=a;a=document.createElement("div");a.className="fla_v2_ItemInfoBar";a.style.backgroundColor=k(this.appName).modalInfoBoxBgColor;if(!f.is_touch_device||f.is_touch_device&&f.mouseDetected){var c=document.createElement("div");c.className="fla_InfoBarCloseButton";c.innerHTML='<svg height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
c.childNodes[0].style.fill=f.hexToRgbaStrin(k(this.appName).modalInfoBoxTitleTextColor,1);c.addEventListener("click",function(){e.prepareToRemove()},!1);a.appendChild(c)}this.view=a}function t(a,e){this.appName=a;this.modal=e;a=document.createElement("div");a.className="fla_v2_ItemShare";a.style.backgroundColor=k(this.appName).modalInfoBoxBgColor;if(!f.is_touch_device||f.is_touch_device&&f.mouseDetected){var c=document.createElement("div");c.className="fla_InfoBarCloseButton";c.innerHTML='<svg height="512px" id="Layer_1" style="enable-background:new 0 0 512 512;" version="1.1" viewBox="0 0 512 512" width="512px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';
c.childNodes[0].style.fill=f.hexToRgbaStrin(k(this.appName).modalInfoBoxTitleTextColor,1);c.addEventListener("click",function(){e.prepareToRemove()},!1);a.appendChild(c)}this.view=a}function u(a){var e=this;this.type=void 0;this.delegate=a;this.appName=a.appName;this.view=document.createElement("div");this.view.className="fla_v2_Modal";this.closeButton=document.createElement("div");this.closeButton.className="flaModalCloseButton";this.closeButton.style.backgroundColor=k(this.appName).modaBgColor;
this.closeButton.style.opacity=k(this.appName).modalBgAlpha;this.closeButton.addEventListener("click",function(a){e.prepareToRemove(a)},!1);this.view.appendChild(this.closeButton);a=document.createElement("div");a.className="fla_flexe";this.view.appendChild(a);this.scrollView=void 0;this.dragging=!1;this._scrollViewTranslateY=0;this.startDragHandler=void 0;this.viewCompleted=!1;this.addToStage()}var f=v,k=f.moduleSettings;r.prototype={set item(a){var e=this.view;var c='<div class="fla_ItemTitle" style="color: '+
k(this.appName).modalInfoBoxTitleTextColor+'">'+a.title+"<br>";c=a.description&&""!=a.description?c+('<div class="fla_ItemDescription" style="color: '+k(this.appName).modalInfoBoxTextColor+'">'+a.description+"</div></span>"):c+"</div>";if(""!=c){var b=document.createElement("div");b.className="fla_DescriptionWrap";b.style.float="none";b.innerHTML=c;e.appendChild(b)}if(k(this.appName).infoBarExifEnable){c="";a.meta.data&&a.meta.data.camera&&(c+="<span class=gmItemMetaExifValue>"+a.meta.data.camera+
"</span></br>");var l=[];a.meta.data&&a.meta.data.focal_length&&l.push("<span class=gmItemMetaExifValue>"+a.meta.data.focal_length+"</span>");a.meta.data&&a.meta.data.aperture&&l.push("<span class=gmItemMetaExifValue>"+a.meta.data.aperture+"</span>");a.meta.data&&a.meta.data.shutter_speed&&l.push("<span class=gmItemMetaExifValue>"+a.meta.data.shutter_speed+"</span>");a.meta.data&&a.meta.data.iso&&l.push("<span class=gmItemMetaExifValue>ISO "+a.meta.data.iso+"</span>");for(b=0;b<l.length;b++)c+=l[b],
b<l.length-1&&(c+='<span class="fla_ItemMetaExifSeparator"> / </span>');""!=c&&(b=document.createElement("div"),b.className="fla_DescriptionWrap",b.style.color=f.hexToRgbaStrin(k(this.appName).modalInfoBoxTextColor,1),b.style.fontSize="100%",b.innerHTML=c,e.appendChild(b))}k(this.appName).infoBarCountersEnable&&(b=document.createElement("div"),b.className="fla_DescriptionWrap",b.style.color=f.hexToRgbaStrin(k(this.appName).modalInfoBoxTextColor,1),b.style.fontSize="100%",b.style.minWidth="190px",
c=document.createElement("div"),c.className="likesViewCom",c.innerHTML='<svg enable-background="new 0 0 167 93" height="93px" id="Layer_1" version="1.1" viewBox="0 0 167 93" width="167px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="M83.25,29.25c-9.649,0-17.5,7.851-17.5,17.5s7.851,17.5,17.5,17.5s17.5-7.851,17.5-17.5   S92.899,29.25,83.25,29.25z"/><path d="M83.25,0.75c-45.84,0-83,46-83,46s37.16,46,83,46s83-46,83-46S129.09,0.75,83.25,0.75z M83.25,81.25   c-19.054,0-34.5-15.445-34.5-34.5c0-19.054,15.446-34.5,34.5-34.5s34.5,15.446,34.5,34.5C117.75,65.805,102.304,81.25,83.25,81.25z   "/></g></svg><div class="counterTxt">'+
(a.meta.views?a.meta.views:0)+"</div>",c.getElementsByTagName("svg")[0].style.fill=f.hexToRgbaStrin(k(this.appName).modalInfoBoxTitleTextColor,1),b.appendChild(c),c=document.createElement("div"),c.className="likesViewCom",c.innerHTML='<svg enable-background="new 0 0 51 46" height="46px" id="Layer_1" version="1.1" viewBox="0 0 51 46" width="51px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M46.188,4.101c-5.529-5.53-14.495-5.53-20.023,0L25.39,4.875l-0.996-0.774c-5.529-5.53-14.715-5.53-20.245,0  C-1.38,9.63-1.27,18.595,4.26,24.125l18.753,18.643c0.671,0.671,1.4,1.258,2.376,1.766c0.76-0.508,1.483-1.095,2.155-1.766  l18.643-18.643C51.717,18.595,51.717,9.63,46.188,4.101z""/></svg><div class="counterTxt">'+
(a.meta.likes?a.meta.likes:0)+"</div>",c.getElementsByTagName("svg")[0].style.fill=f.hexToRgbaStrin(k(this.appName).modalInfoBoxTitleTextColor,1),b.appendChild(c),e.appendChild(b));k(this.appName).infoBarDateInfoEnable&&(b=document.createElement("div"),b.className="fla_DescriptionWrap",b.style.color=f.hexToRgbaStrin(k(this.appName).modalInfoBoxTextColor,1),b.style.fontSize="100%",c="",a.meta.data&&a.meta.data.created_timestamp&&(a=a.meta.data.created_timestamp.split(" "),l="-- / --",0<a.length&&(l=
(a[0]?a[0]:"")+" "+(a[1]?a[1]:"")+" "+(a[1]?a[2]:"")),c+='<span class="fla_ItemMetaKey">Taken: </span><span class="fla_ItemMetaValue">'+l+"</span>"),b.innerHTML='<div class="fla_ItemsDate">'+c+"</div>",""!=c&&e.appendChild(b))}};t.prototype={set item(a){function e(c){if(!l.dragging){c=this.getAttribute("type");var d="menubar=no,toolbar=no,resizable=yes,scrollbars=yes, top=200, left="+(screen.width-600)/2+", height=450,width=600";switch(c){case "copy":p&&window.open(b,"_blank");c=document.getElementById("fla_SH_title_copy");
d=this.getElementsByClassName("fla_ItemCopyLink")[0].getElementsByTagName("svg")[0];window.getSelection().selectAllChildren(c);try{document.execCommand("copy"),window.getSelection().removeAllRanges(),d.style.fill="green",c.style.color="green",p=!0}catch(q){window.open(b,"_blank")}break;case "facebook":window.open("https://www.facebook.com/share.php?u="+b,"",d);break;case "twitter":window.open("https://twitter.com/intent/tweet?text="+encodeURI(a.title)+"&url="+b,"",d);break;case "pinterest":window.open("http://www.pinterest.com/pin/create/button/?url="+
b+"&media="+a.url+"&description="+encodeURI(a.title),"",d)}}}var c=this.view,b=a.share_link,l=this.modal;var d='<div class="fla_ItemTitle" style="color: '+k(this.appName).modalInfoBoxTitleTextColor+'">'+k(this.appName).shareTitlePlaceHolder+"<br>";d=a.title&&""!=a.title||a.name&&""!=a.nema?d+('<div class="fla_ItemDescription" style="color: '+k(this.appName).modalInfoBoxTextColor+'">'+(a.title?a.title:a.name)+"</div></span>"):d+"</div>";if(""!=d){var g=document.createElement("div");g.className="fla_DescriptionWrap";
g.style.float="none";g.innerHTML=d;c.appendChild(g)}g=document.createElement("div");g.className="fla_DescriptionWrap";g.style.float="none";g.style.padding="0px 20px";c.appendChild(g);var p=!1;d=document.createElement("div");d.setAttribute("type","facebook");d.className="fla_ItemShareButtonWrap";d.id="fla_edia_share_fb";var h=document.createElement("div");h.className="fla_ItemShareButton";h.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M27.6 3h-23.2c-.8 0-1.4.6-1.4 1.4v23.1c0 .9.6 1.5 1.4 1.5h12.5v-10.1h-3.4v-3.9h3.4v-2.9c0-3.4 2.1-5.2 5-5.2 1.4 0 2.7.1 3 .2v3.5h-2.1c-1.6 0-1.9.8-1.9 1.9v2.5h3.9l-.5 3.9h-3.4v10.1h6.6c.8 0 1.4-.6 1.4-1.4v-23.2c.1-.8-.5-1.4-1.3-1.4z"></path></svg><div class="fla_SH_title" style="color: #3b5998">Facebook</div>';
h.getElementsByTagName("svg")[0].style.fill="#3b5998";d.appendChild(h);d.addEventListener("mouseup",e,!1);f.is_touch_device&&d.addEventListener("touchend",e,!1);g.appendChild(d);d=document.createElement("div");d.setAttribute("type","twitter");d.className="fla_ItemShareButtonWrap";d.id="fla_edia_share_tw";h=document.createElement("div");h.className="fla_ItemShareButton";h.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M30 7.3c-1 .5-2.1.8-3.3.9 1.2-.7 2.1-1.8 2.5-3.2-1.1.7-2.3 1.1-3.6 1.4-1-1.1-2.5-1.8-4.2-1.8-3.2 0-5.7 2.6-5.7 5.7 0 .5.1.9.1 1.3-4.8-.2-9-2.5-11.8-6-.5.9-.8 1.9-.8 3 0 2 1 3.8 2.6 4.8-.9 0-1.8-.3-2.6-.7v.1c0 2.8 2 5.1 4.6 5.6-.5.1-1 .2-1.5.2-.4 0-.7 0-1.1-.1.7 2.3 2.9 3.9 5.4 4-2 1.5-4.4 2.5-7.1 2.5-.5 0-.9 0-1.4-.1 2.5 1.6 5.6 2.6 8.8 2.6 10.6 0 16.3-8.8 16.3-16.3v-.7c1.1-1 2-2 2.8-3.2z"></path></svg><div class="fla_SH_title" style="color: #00aced">Twitter</div>';
h.getElementsByTagName("svg")[0].style.fill="#00aced";d.appendChild(h);d.addEventListener("mouseup",e,!1);f.is_touch_device&&d.addEventListener("touchend",e,!1);g.appendChild(d);d=document.createElement("div");d.setAttribute("type","pinterest");d.className="fla_ItemShareButtonWrap";d.id="fla_edia_share_pin";h=document.createElement("div");h.className="fla_ItemShareButton";h.innerHTML='<svg version="1.1" viewBox="0 0 32 32" width="32" height="32" aria-hidden="false"><path d="M16 3c-7.2 0-13 5.8-13 13 0 5.5 3.4 10.2 8.3 12.1-.1-1-.2-2.6 0-3.7.2-1 1.5-6.5 1.5-6.5s-.4-.8-.4-1.9c0-1.8 1-3.2 2.4-3.2 1.1 0 1.6.8 1.6 1.8 0 1.1-.7 2.8-1.1 4.3-.3 1.3.6 2.3 1.9 2.3 2.3 0 4.1-2.4 4.1-6 0-3.1-2.2-5.3-5.4-5.3-3.7 0-5.9 2.8-5.9 5.6 0 1.1.4 2.3 1 3 .1.1.1.2.1.4-.1.4-.3 1.3-.4 1.5-.1.2-.2.3-.4.2-1.6-.8-2.6-3.1-2.6-5 0-4.1 3-7.9 8.6-7.9 4.5 0 8 3.2 8 7.5 0 4.5-2.8 8.1-6.7 8.1-1.3 0-2.6-.7-3-1.5 0 0-.7 2.5-.8 3.1-.3 1.1-1.1 2.5-1.6 3.4 1.2.4 2.5.6 3.8.6 7.2 0 13-5.8 13-13 0-7.1-5.8-12.9-13-12.9z"></path></svg><div class="fla_SH_title" style="color: #cc2127">Pinterest</div>';
h.getElementsByTagName("svg")[0].style.fill="#cc2127";d.appendChild(h);d.addEventListener("mouseup",e,!1);f.is_touch_device&&d.addEventListener("touchend",e,!1);g.appendChild(d);d=document.createElement("div");d.setAttribute("type","copy");d.className="fla_ItemShareButtonWrap";d.id="fla_edia_share_link";h=document.createElement("div");h.className="fla_ItemCopyLink";h.innerHTML='<svg height="1792" viewBox="0 0 1792 1792" width="1792" xmlns="http://www.w3.org/2000/svg"><path d="M1520 1216q0-40-28-68l-208-208q-28-28-68-28-42 0-72 32 3 3 19 18.5t21.5 21.5 15 19 13 25.5 3.5 27.5q0 40-28 68t-68 28q-15 0-27.5-3.5t-25.5-13-19-15-21.5-21.5-18.5-19q-33 31-33 73 0 40 28 68l206 207q27 27 68 27 40 0 68-26l147-146q28-28 28-67zm-703-705q0-40-28-68l-206-207q-28-28-68-28-39 0-68 27l-147 146q-28 28-28 67 0 40 28 68l208 208q27 27 68 27 42 0 72-31-3-3-19-18.5t-21.5-21.5-15-19-13-25.5-3.5-27.5q0-40 28-68t68-28q15 0 27.5 3.5t25.5 13 19 15 21.5 21.5 18.5 19q33-31 33-73zm895 705q0 120-85 203l-147 146q-83 83-203 83-121 0-204-85l-206-207q-83-83-83-203 0-123 88-209l-88-88q-86 88-208 88-120 0-204-84l-208-208q-84-84-84-204t85-203l147-146q83-83 203-83 121 0 204 85l206 207q83 83 83 203 0 123-88 209l88 88q86-88 208-88 120 0 204 84l208 208q84 84 84 204z"/></svg><div id="fla_SH_title_copy" class="fla_SH_title" style="color: #7d7d7d">'+
b+"</div>";h.getElementsByTagName("svg")[0].style.fill="#7d7d7d";d.appendChild(h);d.addEventListener("mouseup",e,!1);f.is_touch_device&&d.addEventListener("touchend",e,!1);g.appendChild(d);c.appendChild(g)}};u.prototype={get infoBar(){return new r(this.appName,this)},get shareBar(){return new t(this.appName,this)},addToStage:function(){var a=this,e=document.getElementsByTagName("body")[0];document.getElementsByTagName("html");this.view.style.zIndex=f.findHighestZIndex(e)+1;f.disableBodyScrollSlider();
m.slider?m.slider.view.appendChild(this.view):e.appendChild(this.view);setTimeout(function(){a.view.style.opacity="1"},30);document.addEventListener("keydown",a.keydownHandler(),!1)},prepareToRemove:function(a){var e=this;document.removeEventListener("keydown",this.handlerKB,!1);this.scrollView.removeEventListener("touchstart",this.startDragHandler,f.passiveListener);this.scrollView.removeEventListener("mousedown",this.startDragHandler,!1);e.view.style.opacity="0";this.delegate.slider||f.enableBodyScrollSlider();
setTimeout(function(){e.view&&e.view.parentNode&&e.view.parentNode.removeChild(e.view);delete e.view;e.delegate.deleteModal()},400)},keydownHandler:function(a){var e=this;e.handlerKB=function(a){switch(a.keyCode){case 27:e.prepareToRemove()}};return e.handlerKB},pushPage:function(a){this.viewCompleted=!1;this.scrollView&&this.scrollView.parentNode&&this.scrollView.parentNode.removeChild(this.scrollView);this.view.appendChild(a);this.scrollView=a;this.updateControlls()},updateControlls:function(){this.scrollView&&
!this.viewCompleted&&(this.startDragHandler=this.startDrag(),this.scrollView.addEventListener("touchstart",this.startDragHandler,f.passiveListener),this.scrollView.addEventListener("mousedown",this.startDragHandler,!1),this.viewCompleted=!0)},get bottom(){return this.view.clientHeight-this.scrollView.clientHeight-20},set scrollViewTranslateY(a){this._scrollViewTranslateY=a;this.scrollView.style.transform="translateY("+a+"px)";a=Math.max(k(this.appName).modalBgAlpha-Math.abs(a/200),0);this.closeButton.style.opacity=
a},get scrollViewTranslateY(){return this._scrollViewTranslateY},startDrag:function(){function a(){g=0<b.scrollViewTranslateY?.2*g+.1*(0-b.scrollViewTranslateY):b.scrollViewTranslateY<b.bottom?.2*g+.1*(b.bottom-b.scrollViewTranslateY):.95*g;b.scrollViewTranslateY+=g;.04>Math.abs(g)?(q(n),b.dragging=!1):n=m(a)}function e(a){a.preventDefault();if(a=k-(a.touches&&a.touches[0]?a.touches[0].pageY:a.pageY))b.dragging=!0;b.scrollViewTranslateY=d-a;p=h;h=b.scrollViewTranslateY;g=h-p}function c(d){d.preventDefault();
b.scrollView.style.transition="none";f.is_touch_device&&(document.removeEventListener("touchmove",e,f.passiveListener),document.removeEventListener("touchend",c,f.passiveListener),document.removeEventListener("touchcancel",c,!1));document.removeEventListener("mousemove",e,!1);document.removeEventListener("mouseup",c,!1);document.removeEventListener("oncontextmenu",c,!1);if(0>=b.bottom){if(b.scrollViewTranslateY<b.bottom-50||50<b.scrollViewTranslateY){b.prepareToRemove();return}}else if(-50>b.scrollViewTranslateY||
50<b.scrollViewTranslateY){b.prepareToRemove();return}(0!=g||0<b.scrollViewTranslateY||b.scrollViewTranslateY<b.bottom)&&b.dragging&&(n=m(a))}var b=this,k=void 0,d=0,g=0,p=0,h=0,n=void 0,m=f.requestAnimationFrame,q=f.cancelAnimationFrame;return function(a){a?(a.preventDefault(),a.originalEvent&&(a=a.originalEvent),g=0,h=b.scrollViewTranslateY,k=a.touches&&a.touches[0]?a.touches[0].pageY:a.pageY,d=b.scrollViewTranslateY,q(n),f.is_touch_device&&(document.addEventListener("touchmove",e,f.passiveListener),
document.addEventListener("touchend",c,f.passiveListener),document.addEventListener("touchcancel",c,!1)),document.addEventListener("mousemove",e,!1),document.addEventListener("mouseup",c,!1),document.addEventListener("oncontextmenu",c,!1)):(g=0,d=b.scrollViewTranslateY,q(n))}}};return new u(m)};
